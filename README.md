# TXSP-Downloader

> 声明：本插件不包含任何"破解"内容，只能下载用户能够正常观看的视频！

本插件只适用于腾讯视频网页版，提供以下几个简单的功能

- 显示视频的尺寸和大小
- 以多个 .ts 文件的形式下载视频流
- 提供 join.txt 帮助用户合并 .ts 文件

## 快速开始

### 添加为 Chrome 插件

- 本项目为一个 Chrome 插件，自然只能用于 Chrome 浏览器
- 解压/克隆本项目后，在 Chrome-更多工具-扩展程序 中点击 加载已解压的扩展程序 选中此目录即可添加插件

### 下载 .ts 文件

- 进入某个腾讯视频观看页面（以 v.qq.com/x/cover 开头）
- 视频信息解析完毕后右下角会出现一个粉色的按钮，点击即可开始下载
  - 目前下载采用弹出新窗口的模式，若不能下载/只下载了一个文件，请观察地址栏右侧是否有弹出窗口拦截警告，并手动允许
  - 建议取消 chrome 的 "每次下载前询问存储地址" 配置，提前配置好下载路径，否则你会点得很累

### 合并 .ts 文件

- 首先，你需要安装 ffmpeg
  - Windows：[安装教程](https://www.cnblogs.com/xswl/p/10042195.html)
  - Mac：安装 homebrew 后 执行 `brew install ffmpeg` 即可
  - 安装及配置路径的成功表现为：命令行执行 ffmpeg 有正常信息输出
- 然后，进入刚才下载了一堆 .ts 文件和 join.txt 的目录，在此打开命令行
- 执行 `ffmpeg -f concat -i join.txt -c copy out.mp4`
  - out.mp4 是输出文件的文件名，可以自由配置

## 未完待续

- [ ] 不通过打开新窗口下载 .ts 文件
- [ ] 在 Client 端完成 .ts 文件的合并